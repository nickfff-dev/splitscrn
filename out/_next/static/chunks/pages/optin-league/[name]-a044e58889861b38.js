(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[852],{1721:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/optin-league/[name]",function(){return n(8743)}])},8743:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return i}});var a=n(5893),l=n(7294),s=n(3299);let o=e=>{var t,n;let{league:o,user:i}=e;(0,l.useEffect)(()=>{(null===i.verificationCode||""===i.verificationCode||!1===i.emailVerified)&&(window.location.href="/user/verify")},[i.verificationCode,i.emailVerified]);let[r,c]=(0,l.useState)(""),{data:u}=(0,s.useSession)(),[d,m]=(0,l.useState)(""),[x,f]=(0,l.useState)(""),[h,g]=(0,l.useState)(!1),p=async()=>{var e,t,n;let a=o.name,l=null==u?void 0:null===(e=u.user)||void 0===e?void 0:null===(t=e.name)||void 0===t?void 0:t.toString(),s=null==u?void 0:null===(n=u.user)||void 0===n?void 0:n.email,d=i.id,x=o.inviteOnly,f=o.buyIn,h=o.buyInFee,p=o.id;try{await fetch(" http://localhost:3000/api/optin-league/".concat(o.name),{method:"POST",body:JSON.stringify({leaguename:a,username:l,teamname:r,userId:d,inviteOnly:x,buyIn:f,buyInFee:h,email:s,leagueId:p,task:"enroll"})}).then(e=>{e.text().then(e=>{"success"===e?(console.log(e),g(!1),m("You have successfully enrolled in this league"),window.location.href="/league-summary/".concat(o.name)):e.startsWith("sent code to")?(console.log(e),g(!0),c(e.split("sent code to")[1]),m("This league is invite only, please enter the invite code sent to ".concat(i.email))):"insufficient funds"===e?(console.log(e),m("You do not have enough funds to enroll in this league please deposit more funds"),window.location.href="/user/wallet"):"league full"===e&&(console.log(e),m("This league is full"))})})}catch(v){console.error(v.message)}};return(0,a.jsx)("div",{className:"m-[5%]",children:(0,a.jsx)("div",{className:" bg-gradient-to-r from-primary to-secondary p-1 rounded-xl max-w-[600px] mx-auto ",children:(0,a.jsx)("div",{className:"bg-gray-dark p-5 rounded-xl",children:h?(0,a.jsxs)("label",{className:"flex space-x-3 flex-row",htmlFor:"invitecode",children:[(0,a.jsx)("p",{className:"text-gray-300 font-bold text-lg",children:"Invite Code"}),(0,a.jsx)("input",{className:"bg-transparent outline rounded text-left px-2 text-secondary text-gray-300 font-bold text-lg",value:x,type:"text",placeholder:"invitecode..",name:"invitecode",onChange(e){f(e.target.value)}}),(0,a.jsx)("input",{type:"submit",value:"Submit",async onClick(){await fetch("/api/optin-league/".concat(o.name),{method:"POST",body:JSON.stringify({inviteCode:x,leaguename:o.name,teamname:r,task:"verifyInviteCode"})}).then(e=>{e.text().then(e=>{console.log(e),"success"===e?window.location.href="/league-summary/".concat(o.name):m("Invite code is invalid")})})},className:"outline outline-secondary px-8 text-gray-300 py-1 text-xl text-center uppercase"})]}):(0,a.jsxs)("div",{className:"flex flex-col space-y-5 items-center ",children:["      ",(0,a.jsxs)("label",{className:"flex items-center justify-between space-x-3",htmlFor:"leaguename",children:[(0,a.jsx)("p",{className:" text-gray-300 font-bold text-lg",children:"League Name"}),(0,a.jsx)("input",{defaultValue:o.name,className:"bg-transparent text-secondary font-bold text-lg"})," "]}),(0,a.jsxs)("label",{className:"flex items-center space-x-5",htmlFor:"username",children:[(0,a.jsx)("p",{className:" text-gray-300 font-bold text-lg",children:"username:"}),(0,a.jsx)("input",{className:"bg-transparent text-secondary font-bold text-lg",defaultValue:null==u?void 0:null===(t=u.user)||void 0===t?void 0:null===(n=t.name)||void 0===n?void 0:n.toString()})]}),(0,a.jsxs)("label",{className:"flex items-center justify-between space-x-5 ",htmlFor:"teamname",children:[(0,a.jsx)("p",{className:" text-gray-300 font-bold text-lg",children:"Team Name "}),(0,a.jsx)("input",{className:"bg-transparent outline rounded text-left px-2 text-secondary text-gray-300 font-bold text-lg",name:"teamname",placeholder:"fantasy name....",onChange(e){c(e.target.value)}})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{className:"outline outline-secondary px-8 text-gray-300 py-1 text-xl text-center uppercase",onClick:p,children:"JOIN"})}),(0,a.jsx)("h1",{style:{color:"white"},children:d||null})]})})})})};var i=!0;t.default=o}},function(e){e.O(0,[774,888,179],function(){return e(e.s=1721)}),_N_E=e.O()}]);